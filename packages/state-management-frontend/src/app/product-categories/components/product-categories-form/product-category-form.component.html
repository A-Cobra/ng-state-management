<ng-container
  *ngIf="
    isCreate ||
      productCategory ||
      productCategoryError ||
      productCategorySubmitError;
    else loading
  "
>
  <form
    class="form"
    [formGroup]="form"
    *ngIf="
      isCreate || productCategory || productCategorySubmitError;
      else error
    "
    (ngSubmit)="onFormSubmit()"
  >
    <div class="form__field">
      <clapp-text-input
        formControlName="name"
        label="Name*"
        [error]="name.invalid && (name.touched || name.dirty)"
      ></clapp-text-input>
      <clapp-helper-text
        *ngIf="name.invalid && (name.touched || name.dirty)"
        textState="error"
      >
        Name is required.
      </clapp-helper-text>
    </div>
    <div class="form__field">
      <clapp-text-input
        formControlName="description"
        label="Description"
      ></clapp-text-input>
    </div>

    <div class="form__action-buttons">
      <clapp-button
        buttonWidth="130px"
        color="secondary"
        type="button"
        plusIcon="ri-arrow-left-s-line"
        routerLink="/"
        >Go back</clapp-button
      >
      <clapp-button
        *ngIf="form.enabled; else editButton"
        [disabled]="form.invalid"
        buttonWidth="130px"
        color="primary"
        type="submit"
      >
        {{ isCreate ? 'Create' : 'Save' }}
      </clapp-button>
      <ng-template #editButton>
        <clapp-button
          buttonWidth="130px"
          color="primary"
          type="button"
          (click)="form.enable()"
          >Edit</clapp-button
        >
      </ng-template>
    </div>
  </form>

  <ng-template #error>{{ productCategoryError?.message }}</ng-template>
</ng-container>

<ng-template #loading>
  <app-loader></app-loader>
</ng-template>
