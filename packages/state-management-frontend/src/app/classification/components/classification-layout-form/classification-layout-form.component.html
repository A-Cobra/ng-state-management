<h2>{{ currentStatus | titlecase }} classification</h2>
<form [formGroup]="formCategory" (ngSubmit)="submit()">
  <section class="containerInputs">
    <div>
      <clapp-text-input
        #textInput
        formControlName="name"
        autocomplete="on"
        [error]="name.touched && name.invalid"
        [success]="name.valid"
        id="name"
        label="Name*"
        [maxLength]="100"
        [minlength]="3"
        name="name"
        placeholder="Name classification"
        type="text"
        (change)="format(textInput.value)"
      ></clapp-text-input>

      <clapp-helper-text
        *ngIf="textInput.error && !textInput.success"
        [textState]="
          formCategory.controls['name'].disabled ? 'disabled' : 'error'
        "
      >
        {{name.errors?.['required'] ? 'Name is required' : ''}}
      </clapp-helper-text>

      <clapp-helper-text
        *ngIf="textInput.success && !textInput.error"
        [textState]="
          formCategory.controls['name'].disabled ? 'disabled' : 'success'
        "
        >Valid name
      </clapp-helper-text>

      <clapp-text-input
        #descriptionInput
        formControlName="description"
        [error]="!!(description.touched && description.invalid)"
        [success]="!!description.valid"
        id="description"
        label="Description*"
        [maxLength]="200"
        [minlength]="3"
        name="description"
        type="text"
      ></clapp-text-input>

      <clapp-helper-text
        *ngIf="descriptionInput.error && !descriptionInput.success"
        [textState]="
          formCategory.controls['description'].disabled ? 'disabled' : 'error'
        "
      >
        {{description.errors?.['required'] ? 'Description is required' : ''}}
      </clapp-helper-text>

      <clapp-helper-text
        *ngIf="descriptionInput.success && !descriptionInput.error"
        [textState]="
          formCategory.controls['name'].disabled ? 'disabled' : 'success'
        "
        >Valid description
      </clapp-helper-text>

      <ng-container
        *ngIf="currentStatus !== 'create' && numberOfBusinesses.value > 0"
      >
        <clapp-text-input
          formControlName="numberOfBusinesses"
          id="numberOfBusinesses"
          label="Number of businesses"
          [minlength]="0"
          name="numberOfBusinesses"
          type="number"
        ></clapp-text-input>
      </ng-container>
    </div>

    <ng-container
      *ngIf="currentStatus === 'create' || currentStatus === 'edit'"
    >
      <clapp-file-upload
        [myPreviewImg]="imgDefault"
        (fileUploaded)="getUrl($event)"
      ></clapp-file-upload>
    </ng-container>

    <ng-container *ngIf="currentStatus === 'detail'">
      <clapp-image-display
        [src]="image.value"
        type="square"
        size="large"
        alt="placeholder"
      ></clapp-image-display>
    </ng-container>
  </section>

  <section class="containerButtons">
    <clapp-button
      color="secondary"
      size="small"
      [disabled]="false"
      plusIcon="ri-arrow-left-s-line"
      type="button"
      [routerLink]="getNavigate()"
    >
      Go Back
    </clapp-button>

    <div
      [ngClass]="{
        containerBtn: currentStatus !== 'detail',
        containerBtnDetail: currentStatus === 'detail'
      }"
    >
      <ng-container *ngIf="currentStatus === 'detail'">
        <clapp-button
          color="primary"
          size="small"
          [disabled]="formCategory.invalid"
          [plusIcon]="iconButton"
          [routerLink]="['../../edit', this.idClassification]"
          type="button"
        >
          Edit
        </clapp-button>

        <clapp-button
          color="primary"
          size="small"
          [disabled]="formCategory.invalid"
          plusIcon="ri-delete-bin-line"
          type="submit"
        >
          Delete
        </clapp-button>
      </ng-container>

      <ng-container *ngIf="currentStatus !== 'detail'">
        <clapp-button
          color="primary"
          size="small"
          [disabled]="formCategory.invalid"
          [plusIcon]="iconButton"
          type="submit"
        >
          {{ currentStatus | titlecase }}
        </clapp-button>
      </ng-container>
    </div>
  </section>
</form>
